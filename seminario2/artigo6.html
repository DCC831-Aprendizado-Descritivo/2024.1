<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Discovering a Taste for the Unusual: Exceptionla Models for Preference Mining ‚Äì Aprendizado Descritivo</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-semin√°rio-1" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Semin√°rio 1</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-semin√°rio-1">    
        <li>
    <a class="dropdown-item" href="../seminario1/artigo1.html">
 <span class="dropdown-text">Artigo 1: A Survey of High Utility Itemset Mining</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../seminario1/artigo2.html">
 <span class="dropdown-text">Artigo 2: Finding Local Groupings of Time Series</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../seminario1/artigo3.html">
 <span class="dropdown-text">Artigo 3: Representation Learning for Frequent Subgraph Mining</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-semin√°rio-2" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Semin√°rio 2</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-semin√°rio-2">    
        <li>
    <a class="dropdown-item" href="../seminario2/artigo4.html">
 <span class="dropdown-text">Artigo 4: Anytime discovery of a diverse set of patterns with Monte Carlo tree search</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../seminario2/artigo5.html">
 <span class="dropdown-text">Artigo 5: For Real: A Thorough Look at Numeric Attributes in Subgroup Discovery</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../seminario2/artigo6.html">
 <span class="dropdown-text">Discovering a Taste for the Unusual: Exceptionla Models for Preference Mining</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-semin√°rio-3" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Semin√°rio 3</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-semin√°rio-3">    
        <li>
    <a class="dropdown-item" href="../seminario3/artigo7.html">
 <span class="dropdown-text">Artigo 7 - Minera√ß√£o Supervisionada de Padr√µes Sequenciais em Esportes para Identificar Padr√µes de Jogo Importantes: Uma Aplica√ß√£o ao Rugby Union</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../seminario3/artigo8.html">
 <span class="dropdown-text">Artigo 8 - Automated identification of patient subgroups: A case-study on mortality of COVID-19 patients admitted to the ICU</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../seminario3/artigo9.html">
 <span class="dropdown-text">Artigo 9: "Introducing exceptional growth mining‚Äî Analyzing the impact of soil characteristics on on-farm crop growth and yield variability"</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <span class="nav-link">
<span class="menu-text">Projetos</span>
    </span>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../projetos.html"> 
<span class="menu-text">Links para reposit√≥rios dos projetos da disciplina Aprendizado Descritivo 2024/1</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#contextualiza√ß√£o-do-problema" id="toc-contextualiza√ß√£o-do-problema" class="nav-link active" data-scroll-target="#contextualiza√ß√£o-do-problema">Contextualiza√ß√£o do problema</a></li>
  <li><a href="#conceitos-importantes" id="toc-conceitos-importantes" class="nav-link" data-scroll-target="#conceitos-importantes">Conceitos importantes</a>
  <ul class="collapse">
  <li><a href="#label-ranking" id="toc-label-ranking" class="nav-link" data-scroll-target="#label-ranking">Label Ranking</a></li>
  <li><a href="#descoberta-de-subgrupos-e-exceptional-model-mining" id="toc-descoberta-de-subgrupos-e-exceptional-model-mining" class="nav-link" data-scroll-target="#descoberta-de-subgrupos-e-exceptional-model-mining">Descoberta de Subgrupos e Exceptional Model Mining</a></li>
  <li><a href="#estrat√©gia-de-busca" id="toc-estrat√©gia-de-busca" class="nav-link" data-scroll-target="#estrat√©gia-de-busca">Estrat√©gia de Busca</a></li>
  <li><a href="#regras-de-distribui√ß√µes" id="toc-regras-de-distribui√ß√µes" class="nav-link" data-scroll-target="#regras-de-distribui√ß√µes">Regras de Distribui√ß√µes</a></li>
  </ul></li>
  <li><a href="#matriz-de-prefer√™ncia" id="toc-matriz-de-prefer√™ncia" class="nav-link" data-scroll-target="#matriz-de-prefer√™ncia">Matriz de Prefer√™ncia</a></li>
  <li><a href="#entendendo-os-algoritmos-usados" id="toc-entendendo-os-algoritmos-usados" class="nav-link" data-scroll-target="#entendendo-os-algoritmos-usados">Entendendo os algoritmos usados</a>
  <ul class="collapse">
  <li><a href="#passo-a-passo-do-algoritmo" id="toc-passo-a-passo-do-algoritmo" class="nav-link" data-scroll-target="#passo-a-passo-do-algoritmo">Passo a Passo do Algoritmo</a></li>
  </ul></li>
  <li><a href="#metodologia" id="toc-metodologia" class="nav-link" data-scroll-target="#metodologia">Metodologia</a></li>
  <li><a href="#resultados-obtidos" id="toc-resultados-obtidos" class="nav-link" data-scroll-target="#resultados-obtidos">Resultados obtidos</a>
  <ul class="collapse">
  <li><a href="#elei√ß√µes-alem√£s-2005-e-2009-germanelections2005" id="toc-elei√ß√µes-alem√£s-2005-e-2009-germanelections2005" class="nav-link" data-scroll-target="#elei√ß√µes-alem√£s-2005-e-2009-germanelections2005">1. Elei√ß√µes Alem√£s (2005 e 2009) GermanElections2005:</a></li>
  <li><a href="#top7movies" id="toc-top7movies" class="nav-link" data-scroll-target="#top7movies">2. Top7Movies</a></li>
  <li><a href="#algae" id="toc-algae" class="nav-link" data-scroll-target="#algae">3. Algae</a></li>
  <li><a href="#sushi" id="toc-sushi" class="nav-link" data-scroll-target="#sushi">4. Sushi</a></li>
  <li><a href="#cpu-small" id="toc-cpu-small" class="nav-link" data-scroll-target="#cpu-small">5. Cpu-small</a></li>
  <li><a href="#compara√ß√£o-de-m√©tricas-de-qualidade" id="toc-compara√ß√£o-de-m√©tricas-de-qualidade" class="nav-link" data-scroll-target="#compara√ß√£o-de-m√©tricas-de-qualidade">6. Compara√ß√£o de M√©tricas de Qualidade</a></li>
  </ul></li>
  <li><a href="#aplica√ß√µes-e-desafios" id="toc-aplica√ß√µes-e-desafios" class="nav-link" data-scroll-target="#aplica√ß√µes-e-desafios">Aplica√ß√µes e desafios</a></li>
  <li><a href="#execu√ß√£o-dos-algoritmos-usados-no-artigo" id="toc-execu√ß√£o-dos-algoritmos-usados-no-artigo" class="nav-link" data-scroll-target="#execu√ß√£o-dos-algoritmos-usados-no-artigo">Execu√ß√£o dos algoritmos usados no artigo</a>
  <ul class="collapse">
  <li><a href="#reposit√≥rio-md2s_musicproject" id="toc-reposit√≥rio-md2s_musicproject" class="nav-link" data-scroll-target="#reposit√≥rio-md2s_musicproject">Reposit√≥rio MD2S_MusicProject</a></li>
  <li><a href="#reposit√≥rio-my-sushi-addiction" id="toc-reposit√≥rio-my-sushi-addiction" class="nav-link" data-scroll-target="#reposit√≥rio-my-sushi-addiction">Reposit√≥rio My-Sushi-Addiction</a></li>
  </ul></li>
  <li><a href="#conclus√£o" id="toc-conclus√£o" class="nav-link" data-scroll-target="#conclus√£o">Conclus√£o</a></li>
  <li><a href="#refer√™ncias" id="toc-refer√™ncias" class="nav-link" data-scroll-target="#refer√™ncias">Refer√™ncias</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Discovering a Taste for the Unusual: Exceptionla Models for Preference Mining</h1>
</div>



<div class="quarto-title-meta column-page-left">

    
  
    
  </div>
  


</header>


<p>Minera√ß√£o de modelos excepcionais (Exceptional Model Mining - EMM) √© um framework que tem como objetivo encontrar padr√µes locais, assim como a descoberta de subgrupos (Sbugroup Discovery - SD), por√©m EMM busca encontrar correla√ß√µes entre vari√°veis alvo que podem ser consideradas interessantes/exepcionais. J√° SD busca encontrar padr√µes, criando seletores nos atributos dispon√≠veis, para encontrar individuos que atendam um padr√£o de qualidade em rela√ß√£o a distribui√ß√£o de uma √∫nica vari√°vel alvo.</p>
<p>O artigo aborda uma t√©cnica chamada minera√ß√£o de prefer√™ncias exepcionais (Excepional Preference Mining - EPM), onde procura-se achar prefer√™ncia sobre r√≥tulos, ou seja, encontrar prefer√™ncias excepcionais de diversas op√ß√µes poss√≠veis sobre uma vari√°vel.</p>
<section id="contextualiza√ß√£o-do-problema" class="level2">
<h2 class="anchored" data-anchor-id="contextualiza√ß√£o-do-problema">Contextualiza√ß√£o do problema</h2>
<p>Diversas linhas de pesquisa buscam construir modelos preditivos capazes de realizarem um ajuste global a um conjunto de dados, de forma fornecer resultados generalizados para todo o conjunto de dados que foi treinado, al√©m de prever com acur√°cia novos conjuntos de dados. Esses modelos podem fornecer grande ajuda em tomadas de decis√£o, pois s√£o capazes de preverem uma vari√°vel alvo. Contudo, pode-se extrair informa√ß√µes valiosas procurando padr√µes locais. Em casos como: elei√ß√µes, market-places, restaurantes, sistemas de recomenda√ß√£o em redes sociais. O objetivo √© tentar encontrar padr√µes de prefer√™ncia, onde seria poss√≠vel encontrar atributos de amostras que caracterizam essas prefer√™ncias.</p>
<p>Busca-se portanto encontrar correla√ß√µes entre os r√≥tulos, objetivando encontrar uma prefer√™ncia entre eles em grupos locais, considerados excepcionais.</p>
<figure align="center" class="figure">
<img src="imgs/artigo6/image1.png" style="max-width: 100%;" class="figure-img">
<figcaption>
Descoberta de Modelos Excepcionais - Imagem Gerada por <a href="https://openai.com/index/dall-e-2/">DALL-E</a>
</figcaption>
</figure>
<p>Entre os m√©todos que realizam fun√ß√µes semelhantes a EPM, pode-se destacar o uso de regras de associa√ß√£o, proposto por Henzgen e Hullermeier, que faz uma busca por padr√µes de subranking.</p>
</section>
<section id="conceitos-importantes" class="level2">
<h2 class="anchored" data-anchor-id="conceitos-importantes">Conceitos importantes</h2>
<section id="label-ranking" class="level3">
<h3 class="anchored" data-anchor-id="label-ranking">Label Ranking</h3>
<p>Dada uma inst√¢ncia a <span class="math inline">\(x = \{a_1, a_2, \ldots, a_m, \pi\}\)</span> do espa√ßo de inst√¢ncias <span class="math inline">\(\mathbb{X}\)</span>, o objetivo √© prever o rank dos r√≥tulos <span class="math inline">\(\mathbb{L} = \{\lambda_1, \ldots, \lambda_n\}\)</span> associados com <span class="math inline">\(x\)</span>. O ranking pode ser representado como uma <strong>strict total order</strong> sob <span class="math inline">\(\mathbb{L}\)</span>, definido no espa√ßo de permuta√ß√£o <span class="math inline">\(\Omega\)</span>.</p>
<p>O Label Ranking se assemelha √†s tarefas de classifica√ß√£o, mas ao inv√©s de prever uma classe, deseja-se ranquear os r√≥tulos. Na classifica√ß√£o, cada inst√¢ncia √© associada a uma <strong>distribui√ß√£o probabil√≠stica</strong> sob <span class="math inline">\(\Omega\)</span>. Isso significa que, para cada <span class="math inline">\(x \in \mathbb{X}\)</span>, existe uma distribui√ß√£o de probabilidade <span class="math inline">\(\mathbb{P}(.|x)\)</span>, de forma que para cada <span class="math inline">\(\pi \in \Omega\)</span>, <span class="math inline">\(\mathbb{P}(\pi|x)\)</span> √© a probabilidade de que <span class="math inline">\(\pi\)</span> est√° associado ao ranking de <span class="math inline">\(x\)</span>. O objetivo de Label Ranking √© mapear <span class="math inline">\(\mathbb{X} \rightarrow \Omega\)</span>.</p>
</section>
<section id="descoberta-de-subgrupos-e-exceptional-model-mining" class="level3">
<h3 class="anchored" data-anchor-id="descoberta-de-subgrupos-e-exceptional-model-mining">Descoberta de Subgrupos e Exceptional Model Mining</h3>
<p>A linguagem usada para retornar um subgrupo √© a seguinte:</p>
<p><span class="math inline">\(ùê¥ùëîùëí ‚â• 30 ‚ãÄ ùêøùëñùëòùëíùë† = ùëÜùëéùëôùëöùëúùëõ ùëÖùëúùëí ‚Üí ùëàùëõùë¢ùë†ùë¢ùëéùëô\)</span></p>
<section id="m√©trica-de-qualidade" class="level4">
<h4 class="anchored" data-anchor-id="m√©trica-de-qualidade">M√©trica de Qualidade</h4>
<p>Na minera√ß√£o de padr√µes, o qu√£o interessante um padr√£o pode ser √© medido pela sua frequ√™ncia; j√° em Subgroup Discovery (SD) essa m√©trica √© estimada de forma supervisionada. Dada uma vari√°vel alvo <span class="math inline">\(t_1\)</span> identificada no dataset, o qu√£o interessante um subgrupo nela for, √© medido pelo qu√£o n√£o-usual a distribui√ß√£o dele neste alvo.</p>
<p>Se em uma popula√ß√£o o comum √© as pessoas gostarem de sushi <strong>chutoro</strong>, um subgrupo interessante seria de pessoas que gostam de <strong>Makizushi</strong>:</p>
<p><span class="math inline">\(Age ‚â• 30 ‚ãÄ Lives in Region = Hokkaido ‚Üí Makizushi\)</span></p>
<p>Se ao inv√©s de usar um √∫nico atributo alvo, m√∫ltiplos alvos <span class="math inline">\(t_1, \ldots, t_l\)</span> est√£o dispon√≠veis, e se n√£o estiver interessado em descobrir distribui√ß√µes n√£o usuais em um alvo, mas na intera√ß√£o entre alvos, pode-se ent√£o empregar o <strong>Exceptional Model Mining (EMM)</strong> no lugar do SD. Essa tarefa consiste em dois fatores: <strong>Model Class</strong> e <strong>M√©trica de Qualidade</strong>.</p>
<p>Model Class √© definido para representar uma intera√ß√£o n√£o comum entre m√∫ltiplos alvos que se esteja interessado. J√° a m√©trica de qualidade √© usada para definir o que n√£o √© usual e, portanto, interessante.</p>
<p>Um exemplo seria tentar encontrar uma correla√ß√£o entre a altura de uma pessoa <span class="math inline">\(( t_1 )\)</span> e a altura m√©dia dos av√≥s <span class="math inline">\(( t_2 )\)</span>. Para isso, √© necess√°rio achar um coeficiente de correla√ß√£o entre $t_1 $ e <span class="math inline">\(t_2\)</span>. Nesse caso aplica-se EMM com um <strong>correlation model class</strong>. No caso de subgrupos muito pequenos, o modelo pode acabar favorecendo-os por serem pouco usuais. Para favorecer subgrupos maiores, deve-se definir uma m√©trica de qualidade que balanceie o qu√£o excepcional um subgrupo √©, e o tamanho dele.</p>
</section>
</section>
<section id="estrat√©gia-de-busca" class="level3">
<h3 class="anchored" data-anchor-id="estrat√©gia-de-busca">Estrat√©gia de Busca</h3>
<p>Em EMM √© explorado um amplo espa√ßo de busca, guiado por uma m√©trica de qualidade para expressar a excepcionalidade buscada. Tipicamente, os subgrupos s√£o buscados em uma busca por n√≠vel, combinando atributos da mesma forma que √© feita uma combina√ß√£o de itemsets para minera√ß√£o de padr√µes frequentes.</p>
<p>A maioria dos algoritmos de busca, fazem de forma generalista-para-espec√≠fico, tratando o espa√ßo de busca como um <strong>lattice</strong> cuja estrutura √© definida por um <strong>refinement operator</strong> <span class="math inline">\(\eta: \mathbb{D} \rightarrow 2^\mathbb{D}\)</span>. Esse operador consegue determinar como descri√ß√µes podem ser estendidas para descri√ß√µes mais complexas por adi√ß√µes at√¥micas. A aplica√ß√£o proposta no artigo assume que <span class="math inline">\(\eta\)</span> √© um <strong>specialization operator</strong>: toda descri√ß√£o $q $ √© um elemento do conjunto <span class="math inline">\(\eta(p)\)</span>, o qual √© mais especializada que a descri√ß√£o <span class="math inline">\(p\)</span> em si. O algoritmo, portanto, retorna uma lista ranqueada de descri√ß√µes que satisfazem as especifica√ß√µes do usu√°rio.</p>
<p>A estrat√©gia de busca empregada foi um <strong>best first search</strong>, em cada n√≠vel as descri√ß√µes s√£o ordenadas pela m√©trica de qualidade <span class="math inline">\(\varphi\)</span>. O limite superior √© o grau de complexidade, geralmente limitado por especialistas, para obter descri√ß√µes com quantidades ideais de atributos para interpreta√ß√£o (profundidade da busca); e o limite inferior √© o suporte dos subgrupos.</p>
</section>
<section id="regras-de-distribui√ß√µes" class="level3">
<h3 class="anchored" data-anchor-id="regras-de-distribui√ß√µes">Regras de Distribui√ß√µes</h3>
<p>Regras de Distribui√ß√µes (Distribution Rules, DR) √© um m√©todo de SD para analisar uma √∫nica vari√°vel alvo. Ao inv√©s de valores representativos (m√©dia, desvio-padr√£o etc.), DR identifica distribui√ß√µes usuais do alvo, encontrando subgrupos expressados pelas regras de associa√ß√£o com a distribui√ß√£o consequente:</p>
<p><span class="math inline">\(S ‚Üí t = Dist_t|S\)</span></p>
<ul>
<li><span class="math inline">\(S\)</span>: √© um conjunto de condi√ß√µes correspondentes √† parte antecedente do DR (um subgrupo).</li>
<li><span class="math inline">\(t\)</span>: √© a propriedade de interesse (ou o alvo).</li>
<li><span class="math inline">\(Dist_t|S\)</span>: √© uma distribui√ß√£o emp√≠rica de <span class="math inline">\(t\)</span> quando <span class="math inline">\(S\)</span> √© observado. Ela √© representada por um conjunto de pares $t_i, freq(t_i) $, onde <span class="math inline">\(t_i\)</span> √© um valor particular de <span class="math inline">\(t\)</span> encontrado quando <span class="math inline">\(S\)</span> √© observado; <span class="math inline">\(freq(t_i)\)</span> √© a frequ√™ncia de <span class="math inline">\(t_i\)</span> quando os itens de <span class="math inline">\(S\)</span> s√£o observados.</li>
</ul>
</section>
</section>
<section id="matriz-de-prefer√™ncia" class="level2">
<h2 class="anchored" data-anchor-id="matriz-de-prefer√™ncia">Matriz de Prefer√™ncia</h2>
<p>Em EMP o conceito alvo consiste em um √∫nico alvo, o que faz sentido em SD. Contudo, o objeto alvo √© um ranqueamento de r√≥tulos, que pode ser representando como compara√ß√µes em pares. Portanto, representa intera√ß√µes entre m√∫ltiplos r√≥tulos individuais, o que √© mais consistente no cen√°rio do EMM.</p>
<p>Ranqueamento de r√≥tulos pode ser dif√≠cil de analisar e visualizar, quando h√° uma quantidade grande de r√≥tulos. O apresentado Sushi dataset, que cont√©m 5000 amostras de opini√µes de pessoas e 10 tipos de sushi mostra um exemplo real. At√© essa quantidade modesta de tipos de sushi diferentes pode ser ranqueado em diversas combina√ß√µes. Isso pode ter um impacto significativo, onde mais de 98% dos 5000 rankings presentes no dataset s√£o √∫nicos.</p>
<p>Por conta disso, os autores apresentaram uma alternativa para ranquear os r√≥tulos, introduzindo as Matrizes de Prefer√™ncia. A matriz de prefer√™ncia (PM, preference matrix) √© uma representa√ß√£o alternativa dos rankings em um conjunto de dados que facilita a an√°lise de comportamentos de prefer√™ncia excepcionais. Em vez de representar diretamente a ordena√ß√£o dos r√≥tulos, a matriz de prefer√™ncia captura as compara√ß√µes par a par entre r√≥tulos, permitindo uma vis√£o mais detalhada das rela√ß√µes de prefer√™ncia.</p>
<p>Representar um conjunto de rankings por PM tem certas vantagens sob as tradicionais representa√ß√µes por permuta√ß√µes. PM podem, naturalmente, derivar uma variedade de conjunto m√©tricas para busca de padr√µes de prefer√™ncia. Contudo, h√° certas limita√ß√µes tamb√©m, a escolha de agrega√ß√£o de m√©tricas pode esconder informa√ß√µes relevantes nas PMs, por exemplo, escolhendo a m√©dia se metade dos rankings minerados forem opostos, o resultando em entradas na PM s√£o iguais a zero. Por isso subgrupos com PM contendo apenas zeros nas entradas s√£o ignorados.</p>
</section>
<section id="entendendo-os-algoritmos-usados" class="level2">
<h2 class="anchored" data-anchor-id="entendendo-os-algoritmos-usados">Entendendo os algoritmos usados</h2>
<p>O algoritmo <strong>EPM</strong> (Exceptional Preference Mining) tem como objetivo identificar subgrupos significativos em um dataset, utilizando uma medida de qualidade para avaliar a diferen√ßa entre as prefer√™ncias do subgrupo e do dataset original.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>function EPM(dataset, quality_measure):</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    dataset_pm <span class="op">=</span> compute_preference_matrix(dataset)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    candidate_subgroups <span class="op">=</span> generate_candidate_subgroups(dataset)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> subgroup <span class="kw">in</span> candidate_subgroups:</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>        subgroup_pm <span class="op">=</span> compute_preference_matrix(subgroup)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>        distance <span class="op">=</span> calculate_distance(dataset_pm, subgroup_pm, quality_measure)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>        subgroup.score <span class="op">=</span> calculate_score(distance, subgroup.size)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    ranked_subgroups <span class="op">=</span> rank_subgroups(dataset_pm, candidate_subgroups)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    significant_subgroups <span class="op">=</span> validate_subgroups(ranked_subgroups)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> significant_subgroups</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="passo-a-passo-do-algoritmo" class="level3">
<h3 class="anchored" data-anchor-id="passo-a-passo-do-algoritmo">Passo a Passo do Algoritmo</h3>
<p>Vamos apresentar o algoritmo EPM (Exceptional Preference Mining): 1. <strong>Fun√ß√£o Principal</strong></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>   function EPM(dataset, quality_measure):</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A fun√ß√£o principal EPM recebe dois par√¢metros:</p>
<p><code>dataset</code>: o conjunto de dados a ser analisado.<br> <code>quality_measure</code>: a medida de qualidade utilizada para avaliar as prefer√™ncias.</p>
<ol start="2" type="1">
<li><strong>Computa√ß√£o da Matriz de Prefer√™ncia do Dataset</strong></li>
</ol>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>dataset_pm <span class="op">=</span> compute_preference_matrix(dataset)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>compute_preference_matrix(dataset)</code>: Calcula a matriz de prefer√™ncia para o dataset completo, que ser√° utilizada como refer√™ncia para comparar os subgrupos.</p>
<ol type="1">
<li><strong>Gera√ß√£o de Subgrupos Candidatos</strong></li>
</ol>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>candidate_subgroups <span class="op">=</span> generate_candidate_subgroups(dataset)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>generate_candidate_subgroups(dataset)</code>: Gera uma lista de subgrupos candidatos a partir do dataset original. Esses subgrupos ser√£o avaliados posteriormente.</p>
<ol type="1">
<li><strong>Avalia√ß√£o dos Subgrupos Candidatos</strong> Para cada subgrupo na lista de candidatos, realiza-se os seguintes passos:</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> subgroup <span class="kw">in</span> candidate_subgroups:</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    subgroup_pm <span class="op">=</span> compute_preference_matrix(subgroup)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    distance <span class="op">=</span> calculate_distance(dataset_pm, subgroup_pm, quality_measure)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    subgroup.score <span class="op">=</span> calculate_score(distance, subgroup.size)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>compute_preference_matrix(subgroup)</code>: Calcula a matriz de prefer√™ncia para o subgrupo espec√≠fico.<br> <code>calculate_distance(dataset_pm, subgroup_pm, quality_measure)</code>: Calcula a dist√¢ncia entre a matriz de prefer√™ncia do dataset completo e a do subgrupo, utilizando a medida de qualidade fornecida.</p>
<section id="f√≥rmula-geral" class="level4">
<h4 class="anchored" data-anchor-id="f√≥rmula-geral">F√≥rmula Geral</h4>
<p>A dist√¢ncia geral <span class="math inline">\(L_S\)</span> entre a matriz de prefer√™ncia do dataset completo <span class="math inline">\(M_D\)</span> e a matriz de prefer√™ncia do subgrupo <span class="math inline">\(M_S\)</span> √© calculada como:</p>
<p><span class="math inline">\(L_S = \frac{1}{2} (M_D - M_S)\)</span></p>
</section>
<section id="medidas-de-qualidade" class="level4">
<h4 class="anchored" data-anchor-id="medidas-de-qualidade">Medidas de Qualidade</h4>
<section id="norm" class="level5">
<h5 class="anchored" data-anchor-id="norm">Norm</h5>
<p>A medida de qualidade <code>Norm</code> √© definida como a norma de Frobenius da matriz <span class="math inline">\(L_S\)</span>. A f√≥rmula √©:</p>
<p><span class="math inline">\(\text{Norm}(S) = \| L_S \|_F = \sqrt{s/n} \cdot \sqrt{ \sum_{i=1}^{k} \sum_{j=1}^{k} L(i,j)^2 }\)</span></p>
</section>
<section id="labelwise" class="level5">
<h5 class="anchored" data-anchor-id="labelwise">Labelwise</h5>
<p>A medida de qualidade <code>Labelwise</code> √© calculada como o valor m√°ximo entre todas as somas das linhas da matriz <span class="math inline">\(L_S\)</span>:</p>
<p><span class="math inline">\(\text{Labelwise}(S) = \max_{i=1,\ldots,k} \frac{1}{k(k-1)} \sum_{j=1}^{k} L(i,j)\)</span></p>
</section>
<section id="pairwise" class="level5">
<h5 class="anchored" data-anchor-id="pairwise">Pairwise</h5>
<p>A medida de qualidade <code>Pairwise</code> √© calculada como o valor m√°ximo entre todos os elementos da matriz <span class="math inline">\(L_S\)</span>:</p>
<p><span class="math inline">\(\text{Pairwise}(S) = \max_{i,j=1,\ldots,k} L(i,j)\)</span></p>
<p>Essas medidas s√£o utilizadas para avaliar a diferen√ßa entre as prefer√™ncias do dataset original e dos subgrupos, ajudando a identificar subgrupos excepcionais.</p>
<p><code>calculate_score(distance, subgroup.size)</code>: Calcula a pontua√ß√£o do subgrupo com base na dist√¢ncia calculada e no tamanho do subgrupo.</p>
</section>
</section>
<section id="passos-para-calcular-a-pontua√ß√£o" class="level4">
<h4 class="anchored" data-anchor-id="passos-para-calcular-a-pontua√ß√£o">Passos para Calcular a Pontua√ß√£o</h4>
<p><strong>Calcular a Cobertura Normalizada do Grupo</strong></p>
<p>A Cobertura Normalizada do Grupo √© dada por:</p>
<p><span class="math inline">\(\sqrt{\frac{s}{n}}\)</span></p>
<p>onde: - <span class="math inline">\(s\)</span> √© o tamanho do subgrupo. - <span class="math inline">\(n\)</span> √© o tamanho do dataset completo.</p>
<p><strong>Multiplicar pela Dist√¢ncia</strong></p>
<p>A pontua√ß√£o final do subgrupo √© obtida multiplicando a Cobertura Normalizada do Grupo pela Dist√¢ncia calculada na fun√ß√£o <code>calculate_distance</code>.</p>
<ol type="1">
<li><strong>Ranqueamento dos Subgrupos</strong></li>
</ol>
<div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>ranked_subgroups <span class="op">=</span> rank_subgroups(dataset_pm, candidate_subgroups)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>rank_subgroups(dataset_pm, candidate_subgroups)</code>: Ordena os subgrupos candidatos com base na pontua√ß√£o calculada, gerando uma lista de subgrupos ranqueados.</p>
</section>
<section id="f√≥rmula-da-covari√¢ncia-ponderada" class="level4">
<h4 class="anchored" data-anchor-id="f√≥rmula-da-covari√¢ncia-ponderada">F√≥rmula da Covari√¢ncia Ponderada</h4>
<p>A f√≥rmula utilizada para calcular a covari√¢ncia ponderada entre o vetor da matriz de prefer√™ncia do dataset completo <span class="math inline">\(\text{vec}(M_D)\)</span> e o vetor da matriz de prefer√™ncia do subgrupo <span class="math inline">\(\text{vec}(M_S)\)</span> √©:</p>
<p><span class="math inline">\(\text{RWCov}(S) = -\sqrt{\frac{s}{n}} \cdot \text{cov}(\text{vec}(M_D), \text{vec}(M_S))\)</span></p>
<p>onde:<br> - <span class="math inline">\(\text{vec}(M_D)\)</span> √© o vetor da matriz de prefer√™ncia do dataset completo.<br> - <span class="math inline">\(\text{vec}(M_S)\)</span> √© o vetor da matriz de prefer√™ncia do subgrupo.<br> - <span class="math inline">\(\text{cov}\)</span> representa a covari√¢ncia entre os dois vetores.<br> - <span class="math inline">\(s\)</span> √© o tamanho do subgrupo.<br> - <span class="math inline">\(n\)</span> √© o tamanho do dataset completo.</p>
<p>Esta medida ajuda a identificar subgrupos que possuem prefer√™ncias excepcionalmente diferentes em rela√ß√£o ao dataset original.</p>
<ol type="1">
<li><strong>Valida√ß√£o dos Subgrupos Significativos</strong></li>
</ol>
<div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>significant_subgroups <span class="op">=</span> validate_subgroups(ranked_subgroups)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>validate_subgroups(ranked_subgroups)</code>: Valida os subgrupos ranqueados para identificar aqueles que s√£o estatisticamente significativos.</p>
<ol type="1">
<li><strong>Retorno dos Subgrupos Significativos</strong> Retorno dos Subgrupos Significativos</li>
</ol>
<div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="cf">return</span> significant_subgroups</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
</section>
<section id="metodologia" class="level2">
<h2 class="anchored" data-anchor-id="metodologia">Metodologia</h2>
<p>Para fazer os experimentos, os autores incorporaram EPM no <a href="https://datamining.liacs.nl/cortana.html">Cortana</a>, que oferece uma estrutura gen√©rica para descoberta de subgrupos e possui ferramentas para que diferentes abordagens de SD sejam aplicadas. Al√©m disso, eles definiram uma linguagem de descri√ß√£o para os subgrupos, que √© composta por conjun√ß√µes l√≥gicas de restri√ß√µes para atributos individuais.</p>
<p>A estrat√©gia adotada para percorrer o espa√ßo de busca foi uma best-first search gulosa. Sendo que os atributos num√©ricos foram discretizados com <em>on fly greedy best-first search</em> contendo 8 bins de mesma largura. Os resultados encontrados passaram pela valida√ß√£o DFD, que serve para evitar que subgrupos sejam selecionados por fatores aleat√≥rios. A valida√ß√£o DFD consiste na cria√ß√£o de c√≥pias do dataset, com algumas altera√ß√µes aleat√≥rias dos atributos-alvo. Subgrupos encontrados nessas c√≥pias podem ser considerados aleat√≥rios. Dessa forma, o m√©todo EPM foi aplicado sobre alguns datasets reais. O procedimento DFD permite controlar o problema das m√∫ltiplas compara√ß√µes em SD e EMM, fornecendo uma forma robusta de identificar padr√µes realmente excepcionais enquanto minimiza a probabilidade de falsas descobertas.</p>
<p>O procedimento DFD tem apenas um par√¢metro: o n√∫mero de c√≥pias do conjunto de dados. Este n√∫mero deve ser suficientemente grande para satisfazer certas condi√ß√µes decorrentes da modelagem global envolvida na cria√ß√£o da DFD. Tipicamente, 100 c√≥pias s√£o suficientes, com um n√≠vel de signific√¢ncia estat√≠stica de 1%.</p>
<p>Seis bases de dados reais de diferentes dom√≠nios foram utilizadas nos experimentos. O dataset Algae apresenta os n√≠veis de frequ√™ncia de alguns tipos de alga em diferentes rios europeus. O dataset Sushi cont√©m os dados demogr√°ficos de um conjunto de pessoas, bem como suas prefer√™ncias em rela√ß√£o a diferentes tipos de sushi. O dataset Top7movies √© um subconjunto de outra base de dados, que apresenta os rankings dos usu√°rios para os 7 filmes mais avaliados. Os datasets GermanElections2005 e GermanElections2009 cont√©m dados socioecon√¥micos dos distritos administrativos da Alemanha e o ranking de vota√ß√£o dos partidos mais populares nessas regi√µes. O dataset Cpu-small apresenta dados extra√≠dos de medi√ß√µes relacionadas a servidores.</p>
<figure align="center" class="figure">
<img src="imgs/artigo6/sushi_movie.png" style="max-width: 100%;" class="figure-img">
<figcaption>
Filmes e sushi - Imagem gerada por <a href="https://openai.com/index/dall-e-2/">DALL-E</a>
</figcaption>
</figure>
<figure align="center" class="figure">
<img src="imgs/artigo6/databases.png" style="max-width: 100%;" class="figure-img">
<figcaption>
Bases de Dados - Fonte: de S√° et. al, Table 2
</figcaption>
</figure>
<p>√â usado um m√©todo chamado Regra de Distribui√ß√£o para procurar distribui√ß√µes alvo, ele foi comparado com o RWNorm aplicado no Cortana</p>
<figure align="center" class="figure">
<img src="imgs/artigo6/caren.png" style="max-width: 100%;" class="figure-img">
<figcaption>
Metodologia t√©cnica DR - Fonte: de S√° et. al, Table 1
</figcaption>
</figure>
<p>Para comparar a distribui√ß√£o dos subgrupos com a popul√ß√£o (o conjunto de dados inteiro) foi realizado o teste estat√≠stico de Komolgorov-Smirgov</p>
</section>
<section id="resultados-obtidos" class="level2">
<h2 class="anchored" data-anchor-id="resultados-obtidos">Resultados obtidos</h2>
<p>A excepcionalidade informada pelas m√©tricas de qualidade podem se apresentar de diferentes formas em diferentes m√©tricas de qualidade, ou seja, depende o que a m√©tricas de qualidade est√° procurando. As m√©tricas podem at√© estar correlacionadas, mas n√£o perfeitamente, os autores forneceram no estudo uma forma do usu√°rio utilizar essas m√©tricas para tomar escolhas mais bem informadas.</p>
<figure align="center" class="figure">
<img src="imgs/artigo6/results.png" style="max-width: 100%;" class="figure-img">
<figcaption>
Rela√ß√£o Entre M√©tricas de Qualidade - Fonte: de S√° et. al, Fig 2
</figcaption>
</figure>
<p>A figura acima mostra gera√ß√£o de 10.000 subgrupos aleat√≥rios, os quais a pontua√ß√£o foi avaliada pelas m√©tricas de qualidade apresentadas. A gera√ß√£o aleat√≥ria combina descri√ß√µes at√© uma profundidade m√°xima ser alcan√ßada. A profundidade da busca √© fixada em 3, permitindo uma boa diversidade de combina√ß√µes de atributos. Para cada par de m√©trica de qualidade na figura, h√° um scatter plot mostrando a rela√ß√£o das pontua√ß√µes. A primeira linha mostra os subgrupos avaliados por RWNorm e o eixo vertical representa a pontua√ß√£o dela; o eixo horizontal representa a pontua√ß√£o de cada m√©trica de qualidade na seguinte ordem: RWNorm; RWNorm-mode; RWCov; LWNorm; PWMax</p>
<p>Pode-se notar que RWNorm-mode mostra um comportamento distinto, ela √© baseada na matriz de dist√¢ncia diferencial L_S, obtida pela diferen√ßa entre as modas da popula√ß√£o (M_D) e a moda dos subgrupos (M_S). Para essa m√©trica, se houver uma invers√£o de prefer√™ncia no ranking dos r√≥tulos em algum subgrupo de tamanho significativo, ele √© considerado interessante, mesmo que seja pouco, como 2%. Para as m√©tricas RWMNorm, LWNorm e PWMax, subgrupos desse tipo j√° n√£o ir√£o ser interessantes, a n√£o ser que a diferen√ßa seja maior, isso fica evidente observando a segunda linha da Figura.</p>
<p>Observando o RWConv, parece que tem o maior vi√©s, isso se d√° pelo fato dessa m√©trica n√£o se basear na matriz de dist√¢ncia L_S; ao inv√©s disso ela √© baseada na correla√ß√£o negativa entre as matrizes de popula√ß√£o (M_D) e subgrupos (M_S). Portanto, essa m√©trica de qualidade n√£o necessariamente ir√° encontrar subgrupos que maximizem a preference distance, mas ir√° mostrar features n√£o usuais de comportamento de forma abstrata.</p>
<section id="elei√ß√µes-alem√£s-2005-e-2009-germanelections2005" class="level3">
<h3 class="anchored" data-anchor-id="elei√ß√µes-alem√£s-2005-e-2009-germanelections2005">1. Elei√ß√µes Alem√£s (2005 e 2009) GermanElections2005:</h3>
<ul>
<li><p>Utilizando a m√©trica de qualidade PWMax com profundidade de busca 1, foram encontrados 62 subgrupos significativos.</p></li>
<li><p>O subgrupo mais relevante foi ‚ÄúRegi√£o = Leste‚Äù, onde o partido Esquerda teve mais votos que o partido FDP em todos os 87 distritos da Alemanha Oriental, contrastando com a maioria dos distritos na Alemanha.</p></li>
<li><p>Outro subgrupo significativo mostrou que em regi√µes de baixa renda (renda ‚â§ 16.979), o partido Esquerda recebeu mais votos que o partido Verde. GermanElections2009:</p></li>
<li><p>Com as mesmas configura√ß√µes, foram identificados 57 subgrupos significativos. Novamente, ‚ÄúRegi√£o = Leste‚Äù mostrou uma forte prefer√™ncia pelo partido Esquerda em compara√ß√£o ao partido Verde.</p></li>
<li><p>Houve um aumento no n√∫mero de distritos de baixa renda favorecendo o partido Esquerda em rela√ß√£o ao partido Verde comparado a 2005. An√°lise com LWNorm:</p></li>
<li><p>Usando a m√©trica LWNorm com profundidade de busca 2, foram encontrados 2965 subgrupos significativos.</p></li>
<li><p>O subgrupo ‚ÄúRegi√£o = Leste‚Äù continuou mostrando forte prefer√™ncia pelo partido Esquerda.</p></li>
<li><p>Outros subgrupos com caracter√≠sticas como menor popula√ß√£o infantil e maior desemprego tamb√©m favoreceram o partido Esquerda, enquanto regi√µes de maior renda mostraram o partido Esquerda como o menos votado.</p></li>
</ul>
</section>
<section id="top7movies" class="level3">
<h3 class="anchored" data-anchor-id="top7movies">2. Top7Movies</h3>
<ul>
<li>Utilizando a m√©trica LWNorm, foram encontrados 2 subgrupos significativos com profundidade de busca 2.</li>
<li>O primeiro subgrupo inclu√≠a pessoas com mais de 34 anos vivendo abaixo de uma latitude de 32.9, que n√£o gostaram do filme ‚ÄúBeleza Americana‚Äù e preferiram ‚ÄúStar Wars: Epis√≥dio IV‚Äù e ‚ÄúO Resgate do Soldado Ryan‚Äù.</li>
<li>A m√©dia de classifica√ß√£o deste subgrupo foi b (Star Wars: Epis√≥dio IV) &gt; f (O Resgate do Soldado Ryan) &gt; c (Star Wars: Epis√≥dio V) &gt; d (Star Wars: Epis√≥dio VI) &gt; g (O Exterminador do Futuro 2) &gt; a (Beleza Americana) &gt; e (Jurassic Park).</li>
</ul>
<figure align="center" class="figure">
<img src="imgs/artigo6/results1.png" style="max-width: 100%;" class="figure-img">
<figcaption>
Resultados Filmes Matriz de Prefixos - Fonte: de S√° et. al, Fig 6
</figcaption>
</figure>
</section>
<section id="algae" class="level3">
<h3 class="anchored" data-anchor-id="algae">3. Algae</h3>
<ul>
<li>Utilizando a m√©trica RWNorm, os resultados indicam que durante a primavera, as esp√©cies de algas a, b e c s√£o mais comuns em rios.</li>
<li>A m√©trica LWNorm revelou mais de 400 subgrupos com profundidade m√°xima de 2.</li>
<li>O melhor subgrupo mostrou que a esp√©cie de alga a √© fortemente preferida no subgrupo em compara√ß√£o com o conjunto de dados geral.</li>
<li>Utilizando profundidade de 3, foram encontrados cerca de 5400 subgrupos, mostrando um comportamento oposto em rela√ß√£o √† esp√©cie de alga a.</li>
</ul>
</section>
<section id="sushi" class="level3">
<h3 class="anchored" data-anchor-id="sushi">4. Sushi</h3>
<ul>
<li>Devido ao alto percentual de rankings √∫nicos, focou-se em padr√µes de ranking labelwise.</li>
<li>A m√©trica LWNorm identificou 149 subgrupos.</li>
<li>O melhor subgrupo revelou que homens com mais de 30 anos mostraram uma forte prefer√™ncia por ouri√ßo-do-mar (r√≥tulo e), contrastando com a popula√ß√£o geral.</li>
</ul>
<figure align="center" class="figure">
<img src="imgs/artigo6/results2.png" style="max-width: 100%;" class="figure-img">
<figcaption>
Compara√ß√£o de Subgrupod de Prefer√™ncia de Sushi com a Popula√ß√£o - Fonte: de S√° et. al, Fig 10
</figcaption>
</figure>
</section>
<section id="cpu-small" class="level3">
<h3 class="anchored" data-anchor-id="cpu-small">5. Cpu-small</h3>
<ul>
<li>Utilizando a m√©trica RWCov, foram encontrados 275 subgrupos significativos com profundidade m√°xima de 4.</li>
<li>O subgrupo mais relevante exibiu grandes desvios em todas as entradas da matriz de prefer√™ncia, indicando comportamento de prefer√™ncia incomum.</li>
</ul>
</section>
<section id="compara√ß√£o-de-m√©tricas-de-qualidade" class="level3">
<h3 class="anchored" data-anchor-id="compara√ß√£o-de-m√©tricas-de-qualidade">6. Compara√ß√£o de M√©tricas de Qualidade</h3>
<ul>
<li><p>Observou-se uma varia√ß√£o na quantidade de subgrupos obtidos por diferentes m√©tricas.</p></li>
<li><p>A RWNorm apresentou mais subgrupos em compara√ß√£o a RWNorm-Mode e RWCov. Cada m√©trica mostrou diferentes vieses, destacando subgrupos espec√≠ficos com comportamentos de prefer√™ncia √∫nicos.</p></li>
<li><p>Esses resultados demonstram a efic√°cia do EPM na identifica√ß√£o de padr√µes de prefer√™ncia excepcionais em diversos contextos, proporcionando insights valiosos sobre comportamentos n√£o usuais em rankings.</p></li>
</ul>
Tamb√©m foi feita uma compara√ß√£o entre o CORTANA e o CAREN que usava a t√©cnica DR:
<figure align="center" class="figure">
<img src="imgs/artigo6/caren_cortana_results.png" style="max-width: 100%;" class="figure-img">
<figcaption>
Compara√ß√£o Resultados CAREN vs CORTANA - Fonte: de S√° et. al, Table 5 &amp; 6
</figcaption>
</figure>
</section>
</section>
<section id="aplica√ß√µes-e-desafios" class="level2">
<h2 class="anchored" data-anchor-id="aplica√ß√µes-e-desafios">Aplica√ß√µes e desafios</h2>
<p>A minera√ß√£o de prefer√™ncias excepcionais pode ser aplicada em diversos contextos e trazer benef√≠cios. Vamos apresentar abaixo algumas aplica√ß√µes onde o uso de EPM teria grande valor.</p>
<p>Na √°rea de neg√≥cios, seria poss√≠vel encontrar subpopula√ß√µes que possuem prefer√™ncias divergentes da maioria, o que permitiria a constru√ß√£o de estrat√©gias de marketing direcionado a esses nichos. Al√©m disso, torna-se mais f√°cil a identifica√ß√£o de varia√ß√µes em tend√™ncias de mercado.</p>
<p>A medicina pode ser positivamente afetada pelo uso de EPM na segmenta√ß√£o de grupos de pacientes com caracter√≠sticas semelhantes. Isso faz com que cada grupo possa receber um tratamento mais especializado.</p>
<p>Outro exemplo de aplica√ß√£o √© o setor p√∫blico. Nesse caso, o conceito de prefer√™ncia poderia ser usado de forma an√°loga para identificar subgrupos que possuem necessidades espec√≠ficas, possibilitando a cria√ß√£o de pol√≠ticas p√∫blicas direcionadas para atender essas pessoas.</p>
<p>Na √°rea de gest√£o de recursos humanos, seria interessante utilizar EPM para detectar nichos de funcion√°rios que possuem alguns fatores de motiva√ß√£o e necessidades mais espec√≠ficos. Assim, a equipe de RH poderia agir de maneira mais assertiva, tornando o ambiente de trabalho mais agrad√°vel e inclusivo.</p>
<p>Apesar das possibilidades ben√©ficas citadas acima, √© importante ressaltar os impactos negativos que podem surgir com a aplica√ß√£o da t√©cnica de EPM nesses cen√°rios. O principal impacto identificado √© a manipula√ß√£o de informa√ß√µes. A busca por padr√µes de prefer√™ncias que fogem √† regra geral pode ser usada de forma indevida caso esses padr√µes sejam divulgados como se fossem representativos para toda a popula√ß√£o. Como um exemplo, pode-se pensar no caso em que uma empresa usa as informa√ß√µes de grupos espec√≠ficos para promover seus produtos para o p√∫blico geral, o que configura em uma propaganda enganosa.</p>
</section>
<section id="execu√ß√£o-dos-algoritmos-usados-no-artigo" class="level2">
<h2 class="anchored" data-anchor-id="execu√ß√£o-dos-algoritmos-usados-no-artigo">Execu√ß√£o dos algoritmos usados no artigo</h2>
<p>O c√≥digo-fonte desenvolvido pelos autores para elabora√ß√£o do artigo n√£o foi disponibilizado. No entanto, foram encontrados dois reposit√≥rios no GitHub que utilizam as mesmas t√©cnicas e citam o artigo estudado.</p>
<section id="reposit√≥rio-md2s_musicproject" class="level3">
<h3 class="anchored" data-anchor-id="reposit√≥rio-md2s_musicproject">Reposit√≥rio MD2S_MusicProject</h3>
<p>Este reposit√≥rio n√£o foi muito explorado pela equipe respons√°vel, pois a documenta√ß√£o que explica os detalhes de implementa√ß√£o foi escrita em franc√™s, o que dificultou o entendimento.</p>
<p><a href="https://github.com/alicemontel/M2DS_MusicProject/tree/master">Link para o reposit√≥rio</a></p>
</section>
<section id="reposit√≥rio-my-sushi-addiction" class="level3">
<h3 class="anchored" data-anchor-id="reposit√≥rio-my-sushi-addiction">Reposit√≥rio My-Sushi-Addiction</h3>
<p>A implementa√ß√£o contida nesse reposit√≥rio aplica a EPM em um dataset de prefer√™ncias de tipos de sushi, mas permite tamb√©m que outros datasets possam ser utilizados. Diferentemente do artigo, o algoritmo de busca usado nessa vers√£o de EPM foi o beam search. No reposit√≥rio, a m√©trica de qualidade √© parametriz√°vel, mas apenas a RWNorm est√° dispon√≠vel para experimenta√ß√£o. Para utilizar outras m√©tricas, √© necess√°rio implement√°-las antes de passar como par√¢metro.</p>
<figure align="center" class="figure">
<img src="imgs/artigo6/sushi_db.png" style="max-width: 100%;" class="figure-img">
<figcaption>
Base de dados Sushi 2016
</figcaption>
</figure>
<p><a href="https://github.com/CharlesGaydon/My-Sushi-Addiction">Link para o reposit√≥rio</a></p>
<ul>
<li><p><strong>0 Quick_Start.ipynb</strong>: Realiza a execu√ß√£o do projeto em passos simples, bastando apenas seguir o roteiro do pr√≥prio notebook. √â poss√≠vel at√© aplicar a EPM aos pr√≥prios dados do usu√°rio, n√£o apenas ao dataset do sushi; ‚Äã</p></li>
<li><p><strong>1 Exceptional_Preference_Mining.ipynb</strong>: Estruturado como um rascunho, este notebook mostra, passo a passo, como foi implementado o algoritmo de Beam Search e sua aplica√ß√£o ao conjunto de dados de sushi;‚Äã</p></li>
<li><p><strong>beam_search.py</strong>: Fun√ß√µes para o algoritmo de Beam Search;‚Äã</p></li>
<li><p><strong>preference_matrix.py</strong>: Fun√ß√µes para calcular e visualizar a Matriz de Prefer√™ncia, e calcular uma pontua√ß√£o de excepcionalidade derivada delas.</p></li>
</ul>
<p>O grupo respons√°vel realizou testes, aplicando o EPM sobre o dataset disponibilizado no reposit√≥rio. Os principais subgrupos excepcionais descobertos foram os subgrupos de mulheres com menos de 19 anos e homens que responderam a pesquisa muito rapidamente. Tamb√©m foram feitos experimentos com as outras m√©tricas que n√£o haviam sido previamente disponibilizadas. No geral, os resultados foram semelhantes √†queles vistos com a RWNorm. Uma descoberta not√°vel foi o subgrupo de mulheres com menos de 39 anos de idade com a m√©trica LWNorm.</p>
<figure align="center" class="figure">
<img src="imgs/artigo6/results_hacker.png" style="max-width: 100%;" class="figure-img">
<figcaption>
Resultados Hacker
</figcaption>
</figure>
</section>
</section>
<section id="conclus√£o" class="level2">
<h2 class="anchored" data-anchor-id="conclus√£o">Conclus√£o</h2>
<p>O artigo analisado apresenta a t√©cnica de Exceptional Preferences Mining (EPM) como uma abordagem inovadora para a descoberta de subgrupos com padr√µes de prefer√™ncia excepcionais. Atrav√©s de uma compara√ß√£o detalhada com outras t√©cnicas, como SD e EMM, o artigo evidencia a especificidade e a utilidade da EPM. Os experimentos realizados com diversos conjuntos de dados demonstram a efic√°cia da t√©cnica e suas poss√≠veis aplica√ß√µes em √°reas como neg√≥cios, medicina, setor p√∫blico e gest√£o de recursos humanos. Apesar dos benef√≠cios apresentados, √© importante considerar os impactos negativos potenciais, como a manipula√ß√£o de informa√ß√µes. A an√°lise dos reposit√≥rios relacionados tamb√©m fornece informa√ß√µes importantes sobre a implementa√ß√£o pr√°tica da EPM, evidenciando a adaptabilidade e flexibilidade da t√©cnica.</p>
</section>
<section id="refer√™ncias" class="level2">
<h2 class="anchored" data-anchor-id="refer√™ncias">Refer√™ncias</h2>
<p>de S√°, C. R., Duivesteijn, W., Azevedo, P., Jorge, A. M., Soares, C., &amp; Knobbe, A. (2018). Discovering a taste for the unusual: exceptional models for preference mining. Machine Learning, 107, 1775-1807.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/DCC831-Aprendizado-Descritivo\.github\.io\/2024\.1\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>